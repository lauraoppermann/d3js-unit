<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="/unit/d3js/libs/d3.v3.min.js"></script>
  <script type="text/javascript" src="/unit/d3js/libs/jquery.js"></script>

	<style>
	body{ font: Arial 5px; text-align: center;}
	.axis path, .axis line{
	fill: none;
	stroke: darkgrey;
	stroke-width: 0.3;
	shape-rendering: crispEdges;
	}
  .axis text{
    font-size: 4px;
  }

	</style>
</head>
<body>
	<script>


		var chart = {"height":130,"width":300,"minX":58,"minY":86,"maxX":103,"maxY":126,"title":"2019-03-31 18:25:17.442","data":[{"x":78,"y":97,"radius":0},{"x":74,"y":96,"radius":0},{"x":78,"y":100,"radius":0},{"x":77,"y":105,"radius":0},{"x":82,"y":107,"radius":0},{"x":84,"y":109,"radius":0},{"x":85,"y":108,"radius":0},{"x":88,"y":105,"radius":0},{"x":93,"y":110,"radius":0},{"x":89,"y":112,"radius":0},{"x":93,"y":108,"radius":0},{"x":89,"y":112,"radius":0},{"x":91,"y":109,"radius":0},{"x":87,"y":112,"radius":0},{"x":83,"y":116,"radius":0},{"x":79,"y":115,"radius":0},{"x":76,"y":114,"radius":0},{"x":73,"y":110,"radius":0},{"x":68,"y":107,"radius":0},{"x":70,"y":112,"radius":0},{"x":83.66885,"y":108.000496,"radius":4.4903007},{"x":88,"y":105,"radius":3.0000029},{"x":92.324905,"y":108.99851,"radius":4.2477527},{"x":88.324936,"y":112,"radius":3},{"x":83,"y":116,"radius":3.0000014},{"x":79,"y":115,"radius":3},{"x":76,"y":114,"radius":3.0000014},{"x":73,"y":110,"radius":3},{"x":68,"y":107,"radius":3},{"x":70,"y":112,"radius":3.0000014}],"id":3}

		//Set margins and sizes
		var margin = {
		top: 20,
		bottom: 50,
		right: 30,
		left: 50
		};

		var width = chart.width;
		var height = chart.height;

		//Create x and y scale to scale inputs
		var xScale = d3.scale.linear().domain([chart.minX, chart.maxX]).range([0, width]);
		var yScale = d3.scale.linear().domain([chart.maxY, chart.minY]).range([0, height]);


		//Create x and y axes
		var xAxis = d3.svg.axis()
		    .scale(xScale)
		    .orient("bottom")
		    .ticks(10)
        .tickSize(2,0);


		var yAxis = d3.svg.axis()
		  .scale(yScale)
		  .orient("left")
      .ticks(5)
      .tickSize(2,0)

    d3.selectAll(".xAxis>.tick")
      .each(function(d, i){
        d3.select(this).style("font-size","4px");
      });

		// append the svg object to the body of the page
		var svg = d3.select("body")
		  .append("svg")
		    .attr("width", width + margin.left + margin.right)
		    .attr("height", height + margin.top + margin.bottom)
		  .append("g")
		    .attr("transform",
		          "translate(" + margin.left + "," + margin.top + ")");

		//Read the data
		var data = chart.data;

		var path = svg.append('g')
		    .selectAll("circle")
		    .data(data)
		    .enter()
		    .append("circle")
		      .attr("cx", function (d) { return xScale(d.x) } )
		      .attr("cy", function (d) { return yScale(d.y) } )
		      .attr("r", function (d) { return (d.radius>0 ? xScale(d.radius+d.x)-xScale(d.x) : 0.5 )})
		      .style("fill", function(d) {
		      if(d.radius > 0){
		       return "none";
		      } else{
		        return "#c26969";
		      }
		      })
		      .style("stroke", function(d) {
		      if(d.radius > 0){
		       return "#8dd6d1";
		      } else{
		        return "none";
		      }
		      })
          .style("stroke-width", 0.5)

	  //Add X Axis
		var x = svg.append("g")
		  .attr("transform", "translate(0," + height + ")")
		  .attr("class", "x axis")
		  .call(xAxis);

	  // Add Y axis
		var y = svg.append("g")
		    .call(yAxis)
		    .attr("class", "y axis");


	  // function reloadChartData() {
	  //   $.get("http://" + chart.host + "/charts/" + chart.id, function(newChart) {
	  //     rerender(newChart);
	  //   });
	  // }
    //
	  // function rerender(newChart) {
	  //   let data = newChart.data;
    //
	  //   if (newChart.visibleDatapointsLimit) {
	  //     data = data.slice(-newChart.visibleDatapointsLimit);
	  //   }
    //
	  //    var circle = svg.select("g").selectAll("circle").data(data);
    //
    //      circle.exit().remove();//remove unneeded circles
    //      circle.enter().append("circle")
    //                 .attr("r",0);//create any new circles needed
    //
    //      //update all circles to new positions
    //      circle.transition()
    //       .duration(0.5)
    //       .attr("cx", function (d) { return xScale(d.date); } )
	  //     .attr("cy", function (d) { return yScale(d.value); } )
	  //     .attr("r", function (d) { return(d.radius==0?1 : d.radius*10 ) })
	  //     .style("fill", function(d) {
	  //     if(d.radius > 0){
	  //      return "none";
	  //     } else{
	  //       return "red";
	  //     }
	  //     })
	  //     .style("stroke", function(d) {
	  //     if(d.radius > 0){
	  //      return "black";
	  //     } else{
	  //       return "none";
	  //     }
	  //     })
	  // }
	  // if (chart.dataRefreshInterval) {
	  //   window.setInterval(reloadChartData, chart.dataRefreshInterval);
	  // }

	</script>
</body>
</html>
